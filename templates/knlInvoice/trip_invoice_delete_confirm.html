{% extends 'partials/base.html' %}
{% load static %}

{% block title %}Confirm Delete - Kamrate{% endblock %}

{% block content %}
<main>
  <div class="page-header">
    <h1>üóëÔ∏è Confirm Delete</h1>
  </div>

  <div class="row">
    <div class="col-md-8 mx-auto">
      <div class="card" style="border: 2px solid #dc3545;">
        <div class="card-body text-center" style="padding: 3rem;">
          <h2 class="mb-3" style="color: #dc3545;">‚ö†Ô∏è Delete Invoice?</h2>
          
          <div class="alert alert-danger mb-4">
            <p class="mb-2">
              <strong>Invoice #:</strong> <span style="font-family: monospace;">{{ invoice.invoice_number }}</span>
            </p>
            <p class="mb-2">
              <strong>Client:</strong> {{ invoice.client.clientName|default:"No Client" }}
            </p>
            <p class="mb-0">
              <strong>Amount:</strong> ‚Ç¶{{ invoice.total|floatformat:2 }}
            </p>
          </div>

          <p class="text-muted mb-4">
            This action cannot be undone. All containers and associated data will be permanently deleted.
          </p>

          <!-- Confirmation Info -->
          <div class="card mb-4" style="background-color: #fff3cd; border: 1px solid #ffc107;">
            <div class="card-body">
              <h6 class="mb-3">üìä What will be deleted:</h6>
              <ul class="text-start" style="margin: 0; padding-left: 20px;">
                <li>Invoice record: <strong>{{ invoice.invoice_number }}</strong></li>
                <li>All {{ invoice.line_items.count }} container(s)</li>
                <li>Payment records: <strong>{{ invoice.payments.count }} payment(s)</strong></li>
              </ul>
            </div>
          </div>

          <!-- Action Buttons -->
          <div style="display: flex; gap: 10px; justify-content: center;">
            <!-- Cancel Button -->
            <a href="{% url 'knlInvoice:trip-invoice-detail' pk=invoice.pk %}" 
               class="btn btn-lg btn-outline-secondary" style="padding: 12px 30px; font-weight: 600;">
              ‚ùå Cancel
            </a>

            <!-- Confirm Delete Button -->
            <form method="POST" style="display: inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-lg btn-danger" style="padding: 12px 30px; font-weight: 600;">
                ‚úì Yes, Delete Invoice
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- Additional Info -->
      <div class="card mt-4" style="background-color: #e7f3ff; border: 1px solid #0099ff;">
        <div class="card-body">
          <h6 class="mb-2">üí° Tip:</h6>
          <p class="mb-0 text-muted">
            Instead of deleting, you can mark the invoice as "Cancelled" from the invoice detail page to maintain a record.
          </p>
        </div>
      </div>
    </div>
  </div>
</main>

<style>
  .btn-lg {
    font-size: 1.1rem;
    border-radius: 8px;
    transition: all 0.3s ease;
  }

  .btn-danger:hover {
    background-color: #bb2d3b !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(220, 53, 69, 0.2);
  }

  .btn-outline-secondary:hover {
    background-color: #f8f9fa;
    color: var(--kamrate-orange) !important;
    border-color: var(--kamrate-orange) !important;
  }
</style>
{% endblock %}