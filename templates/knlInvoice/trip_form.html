{% extends 'partials/base.html' %}
{% load static %}

{% block title %}Create Trip - Kamrate Nigeria Limited{% endblock %}

{% block content %}

<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <!-- Form Card -->
      <div class="card shadow-sm border-0">
        <div class="card-header" style="background: linear-gradient(135deg, #001F4D 0%, #003366 100%); color: white; padding: 25px;">
          <h3 class="mb-1" style="font-weight: 700;">
            <i class="fas fa-truck"></i> {{ title }}
          </h3>
          <p class="text-white-50 mb-0">Fill in the trip details below</p>
        </div>

        <div class="card-body p-5">
          <form method="post" action="" class="trip-form">
            {% csrf_token %}

            <!-- Form Alerts -->
            {% if form.non_field_errors %}
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-circle"></i> Please correct the errors below:
                <ul class="mb-0 mt-2">
                  {% for error in form.non_field_errors %}
                    <li>{{ error }}</li>
                  {% endfor %}
                </ul>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
            {% endif %}

            <!-- Trip Number -->
            <div class="mb-4">
              <label for="{{ form.tripNumber.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                <i class="fas fa-hashtag"></i> Trip Number *
              </label>
              {{ form.tripNumber }}
              {% if form.tripNumber.errors %}
                <div class="alert alert-danger mt-2" role="alert">
                  <i class="fas fa-times-circle"></i> {{ form.tripNumber.errors.0 }}
                </div>
              {% endif %}
              <small class="text-muted d-block mt-2">Unique identifier for this trip (e.g., TRIP-001-2026)</small>
            </div>

            <!-- Truck Selection -->
            <div class="mb-4">
              <label for="{{ form.truck.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                <i class="fas fa-car"></i> Truck *
              </label>
              <div class="input-group">
                {{ form.truck }}
              </div>
              {% if form.truck.errors %}
                <div class="alert alert-danger mt-2" role="alert">
                  <i class="fas fa-times-circle"></i> {{ form.truck.errors.0 }}
                </div>
              {% endif %}
              <small class="text-muted d-block mt-2">Select the truck for this trip</small>
            </div>

            <!-- Origin -->
            <div class="row">
              <div class="col-md-6 mb-4">
                <label for="{{ form.origin.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-map-marker-alt"></i> Origin *
                </label>
                {{ form.origin }}
                {% if form.origin.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.origin.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">Starting location</small>
              </div>

              <!-- Destination -->
              <div class="col-md-6 mb-4">
                <label for="{{ form.destination.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-location-dot"></i> Destination *
                </label>
                {{ form.destination }}
                {% if form.destination.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.destination.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">Ending location</small>
              </div>
            </div>

            <!-- Distance -->
            <div class="row">
              <div class="col-md-6 mb-4">
                <label for="{{ form.distance.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-ruler"></i> Distance (km) *
                </label>
                {{ form.distance }}
                {% if form.distance.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.distance.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">Distance traveled in kilometers</small>
              </div>

              <!-- Revenue -->
              <div class="col-md-6 mb-4">
                <label for="{{ form.revenue.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-money-bill-wave"></i> Revenue (â‚¦) *
                </label>
                {{ form.revenue }}
                {% if form.revenue.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.revenue.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">Total revenue for this trip</small>
              </div>
            </div>

            <!-- Status -->
            <div class="row">
              <div class="col-md-6 mb-4">
                <label for="{{ form.status.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-info-circle"></i> Status *
                </label>
                {{ form.status }}
                {% if form.status.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.status.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">Current status of the trip</small>
              </div>

              <!-- Start Date -->
              <div class="col-md-6 mb-4">
                <label for="{{ form.startDate.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-calendar-alt"></i> Start Date *
                </label>
                {{ form.startDate }}
                {% if form.startDate.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.startDate.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">When the trip started</small>
              </div>
            </div>

            <!-- End Date (if exists in form) -->
            {% if form.endDate %}
              <div class="mb-4">
                <label for="{{ form.endDate.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-calendar-check"></i> End Date
                </label>
                {{ form.endDate }}
                {% if form.endDate.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.endDate.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">When the trip ended (optional)</small>
              </div>
            {% endif %}

            <!-- Notes (if exists in form) -->
            {% if form.notes %}
              <div class="mb-4">
                <label for="{{ form.notes.id_for_label }}" class="form-label fw-600" style="color: #001f4d;">
                  <i class="fas fa-sticky-note"></i> Notes
                </label>
                {{ form.notes }}
                {% if form.notes.errors %}
                  <div class="alert alert-danger mt-2" role="alert">
                    <i class="fas fa-times-circle"></i> {{ form.notes.errors.0 }}
                  </div>
                {% endif %}
                <small class="text-muted d-block mt-2">Additional trip notes (optional)</small>
              </div>
            {% endif %}

            <!-- Form Buttons -->
            <div class="d-flex gap-3 mt-5 pt-4 border-top">
              <button type="submit" class="btn btn-primary btn-lg" style="background-color: #ff9500; border-color: #ff9500; font-weight: 700;">
                <i class="fas fa-save"></i> Save Trip
              </button>
              <a href="/trips/" class="btn btn-outline-secondary btn-lg" style="font-weight: 700;">
                <i class="fas fa-arrow-left"></i> Back to Trips
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .form-label {
    font-weight: 600;
    color: #001f4d;
    margin-bottom: 10px;
  }

  .form-control, .form-select {
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 12px 15px;
    font-size: 14px;
    transition: all 0.3s ease;
  }

  .form-control:focus, .form-select:focus {
    border-color: #ff9500;
    box-shadow: 0 0 0 4px rgba(255, 149, 0, 0.15);
    color: #333;
  }

  .form-control::placeholder {
    color: #999;
    font-style: italic;
  }

  .input-group .form-select,
  .input-group .form-control {
    margin-right: 10px;
  }

  .btn-primary {
    background-color: #ff9500;
    border-color: #ff9500;
    color: white;
    font-weight: 700;
    border-radius: 5px;
    padding: 12px 30px;
    transition: all 0.3s ease;
  }

  .btn-primary:hover {
    background-color: #e68a00;
    border-color: #e68a00;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 149, 0, 0.3);
  }

  .btn-outline-secondary {
    color: #6c757d;
    border-color: #6c757d;
    font-weight: 700;
    border-radius: 5px;
    padding: 12px 30px;
    transition: all 0.3s ease;
  }

  .btn-outline-secondary:hover {
    background-color: #6c757d;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  }

  .card {
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #e9ecef;
  }

  .card-header {
    border: none;
    background: linear-gradient(135deg, #001F4D 0%, #003366 100%);
    color: white;
  }

  .alert {
    border-radius: 5px;
    border: none;
    padding: 15px;
    margin-top: 10px;
  }

  .alert-danger {
    background-color: #f8d7da;
    color: #721c24;
  }

  .alert-success {
    background-color: #d4edda;
    color: #155724;
  }

  .fw-600 {
    font-weight: 600;
  }

  .text-white-50 {
    color: rgba(255, 255, 255, 0.5);
  }

  .border-top {
    border-top: 1px solid #e9ecef !important;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .col-lg-8 {
      padding: 0 15px;
    }

    .card-body {
      padding: 25px !important;
    }

    .btn-lg {
      padding: 10px 20px;
      font-size: 14px;
    }

    .d-flex {
      flex-direction: column;
    }

    .d-flex .btn {
      width: 100%;
    }
  }
</style>

{% endblock %}